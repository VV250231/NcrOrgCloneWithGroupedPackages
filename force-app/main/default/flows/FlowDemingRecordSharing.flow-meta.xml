<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>49.0</apiVersion>
    <assignments>
        <name>AddShareRecordToShareCollection</name>
        <label>AddShareRecordToShareCollection</label>
        <locationX>360</locationX>
        <locationY>344</locationY>
        <assignmentItems>
            <assignToReference>CollectionOfCaddShare</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>DemingShareObject</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>IfAccountManagerActive</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AddShareRecordToShareCollection_0</name>
        <label>AddShareRecordToShareCollection</label>
        <locationX>1119</locationX>
        <locationY>468</locationY>
        <assignmentItems>
            <assignToReference>CollectionOfCaddShare</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>DemingShareObject</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>AddUserIdToCollecttionOfAccountTeamMemberUserId</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AddShareRecordToShareCollection_0_0</name>
        <label>AddShareRecordToShareCollection</label>
        <locationX>291</locationX>
        <locationY>469</locationY>
        <assignmentItems>
            <assignToReference>CollectionOfCaddShare</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>DemingShareObject</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>isCsmActive</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AddShareRecordToShareCollection_0_0_0</name>
        <label>AddShareRecordToShareCollection</label>
        <locationX>619</locationX>
        <locationY>551</locationY>
        <assignmentItems>
            <assignToReference>CollectionOfCaddShare</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>DemingShareObject</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>CheckForAccountId</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>SetValueToShareObject</name>
        <label>SetValueToShareObject</label>
        <locationX>491</locationX>
        <locationY>277</locationY>
        <assignmentItems>
            <assignToReference>DemingShareObject.ParentId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>RecordIdOfCadd</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>DemingShareObject.UserOrGroupId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getCaddRecord.EditShareWithUser__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>DemingShareObject.RowCause</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Manual</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>DemingShareObject.AccessLevel</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Edit</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>AddShareRecordToShareCollection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>SetValueToShareObject_0</name>
        <label>SetValueToShareObject</label>
        <locationX>1392</locationX>
        <locationY>323</locationY>
        <assignmentItems>
            <assignToReference>DemingShareObject.ParentId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>RecordIdOfCadd</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>DemingShareObject.UserOrGroupId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>AccountTeamMemberObj.User.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>DemingShareObject.RowCause</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Manual</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>DemingShareObject.AccessLevel</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Edit</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>AddShareRecordToShareCollection_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>SetValueToShareObject_0_0</name>
        <label>SetValueToShareObject</label>
        <locationX>521</locationX>
        <locationY>431</locationY>
        <assignmentItems>
            <assignToReference>DemingShareObject.ParentId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>RecordIdOfCadd</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>DemingShareObject.UserOrGroupId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getCaddRecord.ReadShareWithUser__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>DemingShareObject.RowCause</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Manual</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>DemingShareObject.AccessLevel</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Edit</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>AddShareRecordToShareCollection_0_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>SetValueToShareObject_0_0_0</name>
        <label>SetValueToShareObject</label>
        <locationX>477</locationX>
        <locationY>555</locationY>
        <assignmentItems>
            <assignToReference>DemingShareObject.ParentId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>RecordIdOfCadd</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>DemingShareObject.UserOrGroupId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>getCaddRecord.EditShareWithUserSpFound__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>DemingShareObject.RowCause</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Manual</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>DemingShareObject.AccessLevel</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Edit</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>AddShareRecordToShareCollection_0_0_0</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>CheckForAccountId</name>
        <label>CheckForAccountId</label>
        <locationX>784</locationX>
        <locationY>632</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>CheckIfBlank</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>AccountIdOfCadd</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>AccountIdOfCadd</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue></stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_Deming_Share_Record</targetReference>
            </connector>
            <label>CheckIfBlank</label>
        </rules>
        <rules>
            <name>CheckIfNotBlank</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>AccountIdOfCadd</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>GetAccountTeamMemeberForCaddAccount</targetReference>
            </connector>
            <label>CheckIfNotBlank</label>
        </rules>
    </decisions>
    <decisions>
        <name>CheckForActiveUser</name>
        <label>CheckForActiveUser</label>
        <locationX>1384</locationX>
        <locationY>57</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>IfUserisActive</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>AccountTeamMemberObj.User.IsActive</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>SetValueToShareObject_0</targetReference>
            </connector>
            <label>IfUserisActive</label>
        </rules>
        <rules>
            <name>ifUserIsNotActive</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>AccountTeamMemberObj.User.IsActive</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>AddUserIdToCollecttionOfAccountTeamMemberUserId</targetReference>
            </connector>
            <label>ifUserIsNotActive</label>
        </rules>
    </decisions>
    <decisions>
        <name>ExecuteFlowConditions</name>
        <label>ExecuteFlowConditions</label>
        <locationX>265</locationX>
        <locationY>63</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>IfCaddAndUserIsDoNotReply</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>RecordIdOfCadd</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue></stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>DoNotReplyUserId</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>GetCurrentLoggedInUserId</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>getCaddRecord</targetReference>
            </connector>
            <label>IfCaddAndUserIsDoNotReply</label>
        </rules>
    </decisions>
    <decisions>
        <name>IfAccountManagerActive</name>
        <label>IfAccountManagerActive</label>
        <locationX>153</locationX>
        <locationY>383</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>IfAmIsActive</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>getCaddRecord.isAccountManagerActive__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>SetValueToShareObject_0_0</targetReference>
            </connector>
            <label>IfAmIsActive</label>
        </rules>
        <rules>
            <name>IfAmIsInActive</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>getCaddRecord.ReadShareWithUser__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>isCsmActive</targetReference>
            </connector>
            <label>IfAmIsInActive</label>
        </rules>
    </decisions>
    <decisions>
        <name>IfSalesPersonActive</name>
        <label>IfSalesPersonActive</label>
        <locationX>232</locationX>
        <locationY>209</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>IfSalesPersonIsActive</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>getCaddRecord.isSalespersonActive__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>SetValueToShareObject</targetReference>
            </connector>
            <label>IfSalesPersonIsActive</label>
        </rules>
        <rules>
            <name>IfSalesPersonIsInActive</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>getCaddRecord.isSalespersonActive__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>IfAccountManagerActive</targetReference>
            </connector>
            <label>IfSalesPersonIsInActive</label>
        </rules>
    </decisions>
    <decisions>
        <name>isCsmActive</name>
        <label>isCsmActive</label>
        <locationX>157</locationX>
        <locationY>627</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>ifCSMisActive</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>getCaddRecord.isCsmActive__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>SetValueToShareObject_0_0_0</targetReference>
            </connector>
            <label>ifCSMisActive</label>
        </rules>
        <rules>
            <name>ifCSMisInactive</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>getCaddRecord.isCsmActive__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>CheckForAccountId</targetReference>
            </connector>
            <label>ifCSMisInactive</label>
        </rules>
    </decisions>
    <formulas>
        <name>GetCurrentLoggedInUserId</name>
        <dataType>String</dataType>
        <expression>{!$User.Id}</expression>
    </formulas>
    <interviewLabel>DemingRecordSharing {!$Flow.CurrentDateTime}</interviewLabel>
    <label>FlowDemingRecordSharing</label>
    <loops>
        <name>AddUserIdToCollecttionOfAccountTeamMemberUserId</name>
        <label>AddUserIdToCollecttionOfAccountTeamMemberUserId</label>
        <locationX>947</locationX>
        <locationY>39</locationY>
        <assignNextValueToReference>AccountTeamMemberObj</assignNextValueToReference>
        <collectionReference>GetAccountTeamMemeberForCaddAccount</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>CheckForActiveUser</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Create_Deming_Share_Record</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>Create_Deming_Share_Record</name>
        <label>Create Deming Share Record</label>
        <locationX>941</locationX>
        <locationY>488</locationY>
        <inputReference>CollectionOfCaddShare</inputReference>
    </recordCreates>
    <recordLookups>
        <name>GetAccountTeamMemeberForCaddAccount</name>
        <label>GetAccountTeamMemeberForCaddAccount</label>
        <locationX>731</locationX>
        <locationY>49</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>AddUserIdToCollecttionOfAccountTeamMemberUserId</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>AccountId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>AccountIdOfCadd</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>AccountTeamMember</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>getCaddRecord</name>
        <label>getCaddRecord</label>
        <locationX>35</locationX>
        <locationY>201</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>IfSalesPersonActive</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>RecordIdOfCadd</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Deming__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Store_Do_Not_Reply_User_Id</name>
        <label>Store Do Not Reply User Id</label>
        <locationX>140</locationX>
        <locationY>61</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>ExecuteFlowConditions</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>UserId__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>UserId__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue></stringValue>
            </value>
        </filters>
        <object>Do_Not_Reply_User_Id__mdt</object>
        <outputAssignments>
            <assignToReference>DoNotReplyUserId</assignToReference>
            <field>UserId__c</field>
        </outputAssignments>
    </recordLookups>
    <start>
        <locationX>16</locationX>
        <locationY>59</locationY>
        <connector>
            <targetReference>Store_Do_Not_Reply_User_Id</targetReference>
        </connector>
    </start>
    <status>Obsolete</status>
    <variables>
        <name>AccountIdOfCadd</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>AccountTeamMemberCollection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>AccountTeamMember</objectType>
    </variables>
    <variables>
        <name>AccountTeamMemberObj</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>AccountTeamMember</objectType>
    </variables>
    <variables>
        <name>CaddActiveUserObj</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>User</objectType>
    </variables>
    <variables>
        <name>CADDActiveUsersReturnFromClass</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>User</objectType>
    </variables>
    <variables>
        <name>CaddRecord</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Deming__c</objectType>
    </variables>
    <variables>
        <name>CheckIfUserIdIsNotBlank</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>CollecionOfAccountTeamMemberUserId</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>CollectionOfActiveUserId</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>CollectionOfCaddShare</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Deming__Share</objectType>
    </variables>
    <variables>
        <name>CollectionOfCaddUserId</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>CollectionOfCaddUserIdSize</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>DemingShareObject</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Deming__Share</objectType>
    </variables>
    <variables>
        <name>DoNotReplyUserId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>RecordIdOfCadd</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>SizeOfCADDActiveUsersReturnFromClass</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>TeamUserVarForAccountTeamObj</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>AccountTeamMember</objectType>
    </variables>
    <variables>
        <name>TempUserVar</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue></stringValue>
        </value>
    </variables>
</Flow>
